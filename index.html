<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Have you ever wondered how people are enjoying your Shiny app?
    This package leverages heatmap.js to provide heatmap of usage. You can
    seamlessly know where users clicked and how many times. This is useful for
    regression testing. ">
<title>Usage Heatmap for Shiny apps • shinyHeatmap</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Usage Heatmap for Shiny apps">
<meta property="og:description" content="Have you ever wondered how people are enjoying your Shiny app?
    This package leverages heatmap.js to provide heatmap of usage. You can
    seamlessly know where users clicked and how many times. This is useful for
    regression testing. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">shinyHeatmap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/RinteRface/shinyHeatmap/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="shinyheatmap">shinyHeatmap<a class="anchor" aria-label="anchor" href="#shinyheatmap"></a>
</h1></div>
<!-- badges: start -->
<p>The goal of <a href="https://github.com/RinteRface/shinyHeatmap" class="external-link">shinyHeatmap</a> is to provide a <strong>free</strong> and <strong>local</strong> alternative to more advanced user tracking platform such as <a href="https://www.google.com/search?q=hotjar&amp;oq=hotjar&amp;aqs=chrome.0.69i59j0i512j69i60l6.1063j0j7&amp;sourceid=chrome&amp;ie=UTF-8" class="external-link">Hotjar</a>.</p>
<p><a href="https://github.com/RinteRface/shinyHeatmap" class="external-link">shinyHeatmap</a> generates beautiful and persistent visual heatmaps, representing the app usage across many user sessions.</p>
<figure><img src="reference/figures/shinyHeatmap-demo.png"><figcaption>Commute explorer Shiny <a href="https://community.rstudio.com/t/commute-explorer-shiny-contest-submission/104651" class="external-link">app</a> (2021 Shiny Contest winner).</figcaption></figure><p><br> If you ever wondered:</p>
<ul>
<li>Is the left action button used?</li>
<li>Did people notice the new tab?</li>
<li>Is the top left checkbox still useful?</li>
</ul>
<p>You should give it a try! If you’re concerned about data privacy, <a href="https://github.com/RinteRface/shinyHeatmap" class="external-link">shinyHeatmap</a> only records x and y clicks coordinates on the window.</p>
<video controls="controls" width="800" height="600" name="shinyHeatmap date review." autoplay muted loop><source src="inst/videos/shinyHeatmap-ui.mp4"></source></video><div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="shiny">{shiny}<a class="anchor" aria-label="anchor" href="#shiny"></a>
</h3>
<p><img src="reference/figures/shinyHeatmap-basic.png"></p>
</div>
<div class="section level3">
<h3 id="bs4dash">{bs4Dash}<a class="anchor" aria-label="anchor" href="#bs4dash"></a>
</h3>
<p><img src="reference/figures/shinyHeatmap-bs4Dash.png"></p>
</div>
<div class="section level3">
<h3 id="shinydashboard">{shinydashboard}<a class="anchor" aria-label="anchor" href="#shinydashboard"></a>
</h3>
<p><img src="reference/figures/shinyHeatmap-shinydashboard.png"></p>
</div>
<div class="section level3">
<h3 id="shinyfluent">{shiny.fluent}<a class="anchor" aria-label="anchor" href="#shinyfluent"></a>
</h3>
<p><img src="reference/figures/shinyHeatmap-shinyFluent.png"></p>
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <a href="https://github.com/RinteRface/shinyHeatmap" class="external-link">shinyHeatmap</a> from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"RinteRface/shinyHeatmap"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level3">
<h3 id="how-to-use-it">How to use it<a class="anchor" aria-label="anchor" href="#how-to-use-it"></a>
</h3>
<p>The app must have a <code>www</code> folder since heatmap data are stored in <code>www/heatmap-data.json</code> by default.</p>
<ol style="list-style-type: decimal">
<li><p>In <code>ui.R</code>, wrap the UI inside <code><a href="reference/with_heatmap.html">with_heatmap()</a></code>. This initializes the canvas to record the click coordinates.</p></li>
<li><p>In <code>server.R</code>, call <code><a href="reference/record_heatmap.html">record_heatmap()</a></code>. Overall, this recovers the coordinates of each click on the JS side and store them in <code>www/heatmap-&lt;USER_AGENT&gt;-&lt;DATE&gt;.json</code>. This may be used later to preview the heatmap by aggregating all compatible user sessions. For instance, mobile platforms are not aggregated with destkop since coordinates would be incorrect. With vanilla <a href="https://shiny.rstudio.com/" class="external-link">shiny</a> templates like <code>fluidPage</code>, you don’t need to change anything. However, with more complex templates, you can pass the target CSS selector of the heatmap container with <code>record_heatmap(target = ".wrapper")</code>. If the app takes time to load, a <strong>timeout</strong> parameters is available. This could be the case when you rely on packages such as <a href="https://github.com/JohnCoene/waiter" class="external-link">{waiter}</a>.</p></li>
<li><p>To download the heatmap locally, you must add <code><a href="reference/download_heatmap.html">download_heatmap()</a></code> to your app, which will read data stored in the JSON files, generate the heatmap and save it as a png file. By default, <code><a href="reference/download_heatmap.html">download_heatmap()</a></code> will show a tiny UI below your app. It allows to see a timeline of the app usage as shown below. To disable the UI, you can call <code>download_heatmap(show_ui = FALSE)</code>, which will show all the aggregated data as well as take a screenshot of the heatmap area. Don’t forget to remove <code><a href="reference/record_heatmap.html">record_heatmap()</a></code> if you don’t want to generate extra logs! In general, you don’t want to use <code><a href="reference/download_heatmap.html">download_heatmap()</a></code> on a deployed app since end users might not be supposed to access and view usage data.</p></li>
</ol>
<p>Below shows an example to record the heatmap:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RinteRface/shinyHeatmap" class="external-link">shinyHeatmap</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define UI for application that draws a histogram</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/with_heatmap.html">with_heatmap</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>    <span class="co"># Application title</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/titlePanel.html" class="external-link">titlePanel</a></span><span class="op">(</span><span class="st">"Old Faithful Geyser Data"</span><span class="op">)</span>,</span>
<span>    <span class="co"># Sidebar with a slider input for number of bins </span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">sidebarLayout</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">sidebarPanel</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html" class="external-link">sliderInput</a></span><span class="op">(</span></span>
<span>          <span class="st">"bins"</span>,</span>
<span>          <span class="st">"Number of bins:"</span>,</span>
<span>          min <span class="op">=</span> <span class="fl">1</span>,</span>
<span>          max <span class="op">=</span> <span class="fl">50</span>,</span>
<span>          value <span class="op">=</span> <span class="fl">30</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="co"># Show a plot of the generated distribution</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">mainPanel</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html" class="external-link">plotOutput</a></span><span class="op">(</span><span class="st">"distPlot"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define server logic required to draw a histogram</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="reference/record_heatmap.html">record_heatmap</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">distPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html" class="external-link">renderPlot</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="co"># generate bins based on input$bins from ui.R</span></span>
<span>    <span class="va">x</span>    <span class="op">&lt;-</span> <span class="va">faithful</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span></span>
<span>    <span class="va">bins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">bins</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># draw the histogram with the specified number of bins</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">x</span>, breaks <span class="op">=</span> <span class="va">bins</span>, col <span class="op">=</span> <span class="st">'darkgray'</span>, border <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Run the application </span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="acknowledgement">Acknowledgement<a class="anchor" aria-label="anchor" href="#acknowledgement"></a>
</h2>
<p><a href="https://github.com/RinteRface/shinyHeatmap" class="external-link">shinyHeatmap</a> is proudly powered by the excellent and free <a href="https://github.com/pa7/heatmap.js" class="external-link">heatmap.js</a> library. Thanks <a href="https://github.com/pa7" class="external-link">@pa7</a> for making this possible.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/RinteRface/shinyHeatmap/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/RinteRface/shinyHeatmap/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing shinyHeatmap</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>David Granjon <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/RinteRface/shinyHeatmap/actions" class="external-link"><img src="https://github.com/RinteRface/shinyHeatmap/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by David Granjon.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
